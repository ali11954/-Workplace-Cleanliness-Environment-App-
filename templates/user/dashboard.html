{% extends "base.html" %}

{% block title %}Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…{% endblock %}

{% block content %}
<div class="main-container">
    <h2 class="text-success fw-bold text-center">ØªØ·Ø¨ÙŠÙ‚ ØªÙ‚ÙŠÙŠÙ… Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ù†Ø¸Ø§ÙØ©</h2>
    <p class="text-center">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¬Ù…ÙŠØ¹ ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø£Ø¯Ù†Ø§Ù‡.</p>

    <!-- ===================== Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ===================== -->
   {% if current_user.is_admin %}
    {% set features = [
        {'url':'evaluations', 'icon':'fa-clipboard-check', 'text':'Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª', 'bg':'bg-evaluations'},
        {'url':'users', 'icon':'fa-user', 'text':'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†', 'bg':'bg-users'},
        {'url':'authorities', 'icon':'fa-users', 'text':'Ø§Ù„Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„Ø©', 'bg':'bg-authorities'},
        {'url':'locations', 'icon':'fa-map-marker-alt', 'text':'Ø§Ù„Ù…Ù†Ø§Ø·Ù‚', 'bg':'bg-locations'},
        {'url':'criteria', 'icon':'fa-list-check', 'text':'Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…', 'bg':'bg-criteria'},
        {'url':'report_summary', 'icon':'fa-broom', 'text':'ØªÙ‚Ø±ÙŠØ± ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù†Ø§Ø·Ù‚', 'bg':'bg-report-evaluation'},
        {'url':'reports', 'icon':'fa-file-alt', 'text':'ØªÙ‚Ø±ÙŠØ± ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', 'bg':'bg-report-general'},
        {'url':'responsibility_report', 'icon':'fa-balance-scale', 'text':'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„Ø©', 'bg':'bg-report-responsibility'}
    ] %}
{% else %}
    {% set features = [
        {'url':'evaluations', 'icon':'fa-clipboard-check', 'text':'Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª', 'bg':'user-bg-evaluations'},
        {'url':'report_summary', 'icon':'fa-broom', 'text':'ØªÙ‚Ø±ÙŠØ± ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù†Ø§Ø·Ù‚', 'bg':'user-bg-report-evaluation'},
        {'url':'responsibility_report', 'icon':'fa-balance-scale', 'text':'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„Ø©', 'bg':'user-bg-report-responsibility'}
    ] %}
{% endif %}

    <div class="card-container d-flex flex-wrap justify-content-center gap-3 mt-4">
        {% for feature in features %}
        <a href="{{ url_for(feature.url) }}" class="feature-card {{ feature.bg }}">
            <div class="icon-circle">
                <i class="fas {{ feature.icon }}"></i>
            </div>
            <div style="font-size:0.9rem;">{{ feature.text }}</div>
        </a>
        {% endfor %}
    </div>

    <!-- ===================== Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ© ===================== -->
    <div class="user-card-wrapper d-flex justify-content-center mt-5">
        <div class="user-card text-center p-4 shadow-lg rounded-4">
            <div class="user-name fw-bold mb-3 text-dark">
                <i class="fas fa-user-circle text-success me-2"></i>
                {{ current_user.username }}
            </div>
            <a href="{{ url_for('generate_user_pdf', user_id=current_user.id) }}"
               class="print-card-btn">
               <i class="fas fa-print"></i>
               <span>Ø·Ø¨Ø§Ø¹Ø© Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</span>
            </a>
        </div>
    </div>
</div>

<!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
<div class="app-info-icon" onclick="toggleAppInfo()">
    <i class="fas fa-info-circle"></i>
</div>

<!-- Ù†Ø§ÙØ°Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
<div id="appInfoModal" class="app-info-modal">
    <div class="app-info-content">
        <span class="close" onclick="toggleAppInfo()">&times;</span>
      <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h3>
        <p><strong>Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:</strong> Ù†Ø¸Ø§Ù… ØªÙ‚ÙŠÙŠÙ… Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ù†Ø¸Ø§ÙØ©</p>
        <p><strong>Ø§Ù„Ø¥ØµØ¯Ø§Ø±:</strong> 1.0.0</p>
                        <p><strong>ØªÙˆØ§ØµÙ„:</strong>Ù„Ù„ØªÙˆØ§ØµÙ„ Ø§Ùˆ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± </p>
        <p><strong>Ø§Ù„Ù…ØµÙ…Ù…:</strong> Ø¹Ù„ÙŠ Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ Ù…Ø¨Ø§Ø±Ùƒ</p>
                <p><strong>Ø¨Ø±ÙŠØ¯:</strong>alimubark440@gmail.com</p>
                        <p><strong>Ù‡Ø§ØªÙ:</strong>00967-(711127883 / 773014017)</p>

                <p><strong>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:</strong> ØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„ØªØ³Ù‡ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ ÙˆØ§Ù„Ø¬Ù‡Ø§Øª ÙˆÙÙ‚ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©.</p>

</div>

</div>

<!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© ØªØ¹Ù„ÙŠÙ…Ø§Øª -->
<div class="help-icon" onclick="toggleHelp()">
    <i class="fas fa-question-circle"></i>
</div>

<!-- Ù†Ø§ÙØ°Ø© ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
<div id="helpModal" class="help-modal">
    <div class="help-content">
        <span class="close" onclick="toggleHelp()">&times;</span>
        <h3>ğŸ“˜ Ø¯Ù„ÙŠÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h3>
        <p>Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ Ø¥Ø¯Ø§Ø±Ø© <strong>ØªÙ‚ÙŠÙŠÙ… Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ù†Ø¸Ø§ÙØ©</strong> Ø¨Ø´ÙƒÙ„ Ù…ØªÙƒØ§Ù…Ù„. ÙÙŠÙ…Ø§ ÙŠÙ„ÙŠ Ø´Ø±Ø­ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª:</p>

        <ul>
            <li><strong>ğŸ·ï¸ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª:</strong> Ø¥Ø¶Ø§ÙØ© ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ±.</li>
            <li><strong>ğŸ“„ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:</strong> Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© Ù„ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¨Ø´ÙƒÙ„ ÙŠØ¯ÙˆÙŠ Ø§Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ†Ù‚Ù„ ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø±Ø¶.</li>
            <li><strong>ğŸ§¹ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ù†Ø§Ø·Ù‚:</strong> Ø¹Ø±Ø¶ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ù„ÙƒÙ„ Ù…Ù†Ø·Ù‚Ø©.</li>
            <li><strong>ğŸ“ Ø®Ø·Ø© Ø¹Ù…Ù„:</strong> Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ®Ø·Ø· Ø§Ù„ØªØ­Ø³ÙŠÙ†ØŒ Ù…Ø¹ Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„ØªÙ‡Ø§ (Ù…ÙØªÙˆØ­Ø©/Ù…ØºÙ„Ù‚Ø©).</li>
            <li><strong>âš–ï¸ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Øª:</strong> Ø¹Ø±Ø¶ ÙˆØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„Ø©.</li>
        </ul>

        <h4>ğŸ” Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</h4>
        <p>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ (KPIs) Ù„Ù…ØªØ§Ø¨Ø¹Ø© ØªÙ‚Ø¯Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø§Ø´Ø±ØŒ ÙˆÙ…Ø¹Ø±ÙØ© Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…ÙØªÙˆØ­Ø© ÙˆØ§Ù„Ù…ØºÙ„Ù‚Ø©.</p>
    </div>
</div>

<style>
/* ===================== Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ===================== */
.app-info-icon,
.help-icon {
    position: fixed;
    right: 20px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    transition: transform 0.3s;
    z-index: 1000;
}

.app-info-icon { top: 20px; background: #0d6efd; color: #fff; }
.help-icon { top: 70px; background: #ffc107; color: #fff; }

.app-info-icon:hover,
.help-icon:hover { transform: scale(1.1); }

/* ===================== Ø§Ù„Ù†ÙˆØ§ÙØ° (Ù…ÙˆØ¯Ø§Ù„) ===================== */
.app-info-modal,
.help-modal {
    visibility: hidden;
    opacity: 0;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.5);
    z-index: 999;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.app-info-modal.active,
.help-modal.active {
    visibility: visible;
    opacity: 1;
}

.app-info-content,
.help-content {
    background: #fff;
    padding: 20px 30px;
    border-radius: 12px;
    max-width: 90%;
    text-align: right;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    position: relative;
}

.app-info-content { width: 350px; }
.help-content { width: 600px; max-height: 80vh; overflow-y: auto; line-height: 1.8; }

.close {
    position: absolute;
    top: 10px;
    left: 15px;
    font-size: 1.5rem;
    cursor: pointer;
    color: #333;
}

    /* ===================== Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ ===================== */
.user-feature-card {
    border: 2px solid #f8f9fa;
}

.user-bg-evaluations {
    background: linear-gradient(135deg, #42a5f5, #64b5f6); /* Ø£Ø²Ø±Ù‚ ÙØ§ØªØ­ */
}
.user-bg-report-evaluation {
    background: linear-gradient(135deg, #66bb6a, #81c784); /* Ø£Ø®Ø¶Ø± ÙØ§ØªØ­ */
}
.user-bg-report-responsibility {
    background: linear-gradient(135deg, #ffb74d, #ffcc80); /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ÙØ§ØªØ­ */
}

</style>

<script>
function toggleAppInfo() {
    document.getElementById('appInfoModal').classList.toggle('active');
}

function toggleHelp() {
    document.getElementById('helpModal').classList.toggle('active');
}
</script>

{% endblock %}

{% block styles %}
<style>
/* ===================== Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ===================== */
.feature-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border-radius: 15px;
    color: #fff;
    font-weight: bold;
    text-decoration: none;
    padding: 15px;
    width: 140px;
    height: 140px;
    transition: transform 0.3s, box-shadow 0.3s;
}
.feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

/* ===================== Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠØ© ===================== */
.icon-circle {
    background: rgba(255, 255, 255, 0.2);
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 12px;
    font-size: 1.8rem;
    transition: background 0.3s;
}
.feature-card:hover .icon-circle {
    background: rgba(255, 255, 255, 0.4);
}

/* ===================== Ø£Ù„ÙˆØ§Ù† Ø§Ù„ØªØ¯Ø±Ø¬ Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ===================== */
.bg-evaluations { background: linear-gradient(45deg, #198754, #20c997); }
.bg-users { background: linear-gradient(45deg, #0dcaf0, #0d6efd); }
.bg-authorities { background: linear-gradient(45deg, #ffc107, #fd7e14); }
.bg-locations { background: linear-gradient(45deg, #6c757d, #343a40); }
.bg-criteria { background: linear-gradient(45deg, #198754, #20c997); }

.bg-report-evaluation { background: linear-gradient(135deg, #ff758c, #ff7eb3); }
.bg-report-general { background: linear-gradient(135deg, #6a11cb, #2575fc); }
.bg-report-responsibility { background: linear-gradient(135deg, #43e97b, #38f9d7); }

/* ===================== Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ===================== */
.user-card {
    background: #f8f9fa;
    max-width: 350px;
}
.user-name {
    font-size: 1.1rem;
}

/* ===================== Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ===================== */
.print-card-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 20px;
    background: linear-gradient(45deg, #28a745, #20c997);
    color: #fff;
    font-weight: bold;
    border-radius: 12px;
    text-decoration: none;
    font-size: 0.95rem;
    transition: all 0.3s ease-in-out;
}
.print-card-btn:hover {
    background: linear-gradient(45deg, #20c997, #198754);
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(0,0,0,0.2);
}
.print-card-btn i {
    font-size: 1.2rem;
}
</style>
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
{% endblock %}
